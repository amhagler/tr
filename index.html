<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trivia</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #000080;
            color: #FFFFFF;
        }

        header {
            background-color: #1E90FF;
            color: white;
            padding: 1em;
        }

        .teams {
            display: flex;
            justify-content: space-around;
            margin-bottom: 1em;
        }

        .team {
            font-size: 2em;
            background-color: #DAA520;
            padding: 0.5em;
            border-radius: 50%;
            width: 200px;
            height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .team span {
            display: block;
            font-size: 1em;
        }

        .board {
            display: grid;
            gap: 10px;
            margin: 2em auto;
            width: 90%;
        }

        .board div {
            background-color: #1E90FF;
            padding: 1em;
            border: 2px solid #DAA520;
            cursor: pointer;
            color: white;
            border-radius: 5px;
        }

        .board .category {
            background-color: #DAA520;
            font-weight: bold;
            cursor: default;
        }

        .question-area {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #1E90FF;
            padding: 2em;
            border-radius: 10px;
            width: 60%;
            height: 60%;
            text-align: center;
            border: 10px solid black;
            animation: breathe 1s infinite alternate;
        }

        @keyframes breathe {
            from {
                border-color: black;
            }
            to {
                border-color: silver;
            }
        }

        .question-area .question,
        .question-area .answer {
            font-size: 2em;
            margin: 1em 0;
        }

        .question-area .timer {
            font-size: 3em;
            position: absolute;
            bottom: 10%;
            left: 50%;
            transform: translateX(-50%);
        }

        .controls {
            margin: 1em 0;
        }

        button {
            background-color: #1E90FF;
            color: white;
            padding: 0.5em 1em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #104E8B;
        }

        .winner {
            display: none;
            font-size: 2em;
            color: #DAA520;
            margin-top: 1em;
        }

        #jsonInput {
            width: 80%;
            height: 200px;
            margin-bottom: 1em;
            font-family: Arial, sans-serif;
        }

        #currentTeam {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 1em;
        }

        .category-label {
            font-size: 1.2em;
            padding: 0.5em;
            background-color: #DAA520;
            border-radius: 5px;
        }

        .team-selector {
            display: inline-block;
            margin: 0 10px;
            cursor: pointer;
            padding: 0.5em 1em;
            background-color: #DAA520;
            color: #000080;
            border-radius: 5px;
        }

        .team-selector.selected {
            background-color: #1E90FF;
            color: #FFFFFF;
        }

        .editable {
            display: inline-block;
            padding: 0.1em;
            border-radius: 5px;
            cursor: pointer;
        }

        .editable:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>
    <header>
        <h1>Trivia</h1>
        <div class="teams">
            <div class="team" id="team1">
                <div class="editable" id="teamName1" contenteditable="true" oninput="updateTeamName(1)">Team 1</div>
                <span id="score1" contenteditable="true" oninput="updateScores()">0</span>
            </div>
            <div class="team" id="team2">
                <div class="editable" id="teamName2" contenteditable="true" oninput="updateTeamName(2)">Team 2</div>
                <span id="score2" contenteditable="true" oninput="updateScores()">0</span>
            </div>
            <div class="team" id="team3">
                <div class="editable" id="teamName3" contenteditable="true" oninput="updateTeamName(3)">Team 3</div>
                <span id="score3" contenteditable="true" oninput="updateScores()">0</span>
            </div>
        </div>
        <div id="currentTeam"></div>
        <div class="team-selectors">
            <span class="team-selector" id="selectTeam1" onclick="selectTeam(1)">Team 1</span>
            <span class="team-selector" id="selectTeam2" onclick="selectTeam(2)">Team 2</span>
            <span class="team-selector" id="selectTeam3" onclick="selectTeam(3)">Team 3</span>
        </div>
    </header>
    <main>
        <textarea id="jsonInput" placeholder="Paste your JSON data here..."></textarea>
        <div class="controls">
            <button id="startGame">Start Game</button>
            <button id="resetGame">Reset Game</button>
            <button id="togglePoints">Double</button>
        </div>
        <div class="board" id="board">
            <!-- Jeopardy board cells will be dynamically generated here -->
        </div>
        <div class="question-area" id="question-area">
            <div class="question" id="question"></div>
            <div class="timer" id="timer">10</div>
            <div class="answer" id="answer"></div>
            <div class="controls">
                <button id="correctButton" onclick="markCorrect()">Correct</button>
                <button onclick="closeQuestion()">Close</button>
            </div>
        </div>
        <div class="controls">
            <button onclick="copyTemplate()">Format</button>
        </div>
    </main>
    <div class="winner" id="winner"></div>
    <script>
        let questions = {};
        let currentQuestion = null;
        let currentCategory = null;
        let currentIndex = null;
        let currentCell = null;
        let currentTeam = 1;
        let scores = { team1: 0, team2: 0, team3: 0 };
        let isDouble = false;
        let timerInterval;

        function startGame() {
            try {
                questions = JSON.parse(document.getElementById('jsonInput').value);
            } catch (e) {
                alert('Invalid JSON format. Please check your data and try again.');
                return;
            }

            document.getElementById('jsonInput').style.display = 'none';

            const board = document.getElementById('board');
            board.innerHTML = '';

            const categories = Object.keys(questions);
            const rows = Math.max(...categories.map(category => questions[category].length));
            board.style.gridTemplateColumns = `repeat(${categories.length}, 1fr)`;
            board.style.gridTemplateRows = `repeat(${rows + 1}, auto)`;

            categories.forEach(category => {
                const categoryLabel = document.createElement('div');
                categoryLabel.className = 'category';
                categoryLabel.innerText = category;
                board.appendChild(categoryLabel);
            });

            for (let i = 0; i < rows; i++) {
                categories.forEach(category => {
                    const cell = document.createElement('div');
                    if (questions[category][i]) {
                        cell.innerText = `${questions[category][i].points * (isDouble ? 2 : 1)}`;
                        cell.className = `question-cell ${category}-${i}`;
                        cell.onclick = () => selectQuestion(category, i, cell);
                    }
                    board.appendChild(cell);
                });
            }

            document.getElementById('question-area').style.display = 'none';
            document.getElementById('winner').style.display = 'none';
            updateScores();
            updateCurrentTeamDisplay();
        }

        function selectQuestion(category, index, cell) {
            if (cell.style.backgroundColor === 'silver') return;

            currentQuestion = questions[category][index];
            currentCategory = category;
            currentIndex = index;
            currentCell = cell;
            const questionArea = document.getElementById('question-area');
            questionArea.style.display = 'block';
            document.getElementById('question').innerText = currentQuestion.question;
            document.getElementById('answer').innerText = '';
            document.getElementById('correctButton').style.display = 'inline-block';
            document.getElementById('timer').innerText = '10';

            questionArea.animate(
                [
                    { transform: 'translate(-50%, -50%) scale(0)' },
                    { transform: 'translate(-50%, -50%) scale(1)' }
                ],
                {
                    duration: 300,
                    fill: 'forwards'
                }
            );

            startTimer();
        }

        function startTimer() {
            let timeLeft = 10;
            document.getElementById('timer').innerText = timeLeft;
            timerInterval = setInterval(() => {
                if (timeLeft > 0) {
                    timeLeft--;
                    document.getElementById('timer').innerText = timeLeft;
                } else {
                    clearInterval(timerInterval);
                    document.getElementById('question').innerText = 'Time Expired';
                    setTimeout(() => {
                        closeQuestion();
                    }, 2000);
                }
            }, 1000);
        }

        function showAnswer() {
            document.getElementById('answer').innerText = currentQuestion.answer;
        }

        function closeQuestion() {
            clearInterval(timerInterval);
            document.getElementById('question-area').style.display = 'none';
            if (document.getElementById('correctButton').style.display === 'none') {
                currentCell.style.backgroundColor = 'silver';
                currentCell.onclick = null;
            }
        }

        function updateScore(team, points) {
            scores[`team${team}`] += points;
            updateScores();
        }

        function updateScores() {
            document.getElementById('score1').innerText = scores.team1;
            document.getElementById('score2').innerText = scores.team2;
            document.getElementById('score3').innerText = scores.team3;
        }

        function updateCurrentTeamDisplay() {
            const currentTeamName = document.getElementById(`teamName${currentTeam}`).innerText;
            document.getElementById('currentTeam').innerText = `Current Turn: ${currentTeamName}`;
            document.querySelectorAll('.team-selector').forEach(selector => selector.classList.remove('selected'));
            document.getElementById(`selectTeam${currentTeam}`).classList.add('selected');
            document.getElementById(`selectTeam${currentTeam}`).innerText = currentTeamName;
        }

        function markCorrect() {
            clearInterval(timerInterval);
            updateScore(currentTeam, currentQuestion.points * (isDouble ? 2 : 1));
            showAnswer();
            document.getElementById('correctButton').style.display = 'none';
        }

        function resetGame() {
            scores = { team1: 0, team2: 0, team3: 0 };
            document.getElementById('jsonInput').style.display = 'block';
            document.getElementById('jsonInput').value = '';
            document.getElementById('currentTeam').innerText = '';
            startGame();
        }

        function togglePoints() {
            isDouble = !isDouble;
            document.getElementById('togglePoints').innerText = isDouble ? 'Single' : 'Double';
            startGame();
        }

        function updateTeamName(teamNumber) {
            updateCurrentTeamDisplay();
        }

        function selectTeam(teamNumber) {
            currentTeam = teamNumber;
            updateCurrentTeamDisplay();
        }

        function copyTemplate() {
            const template = `{
    "Category 1": [
        { "question": "Sample Question 1", "answer": "Sample Answer 1", "points": 100 },
        { "question": "Sample Question 2", "answer": "Sample Answer 2", "points": 200 },
        { "question": "Sample Question 3", "answer": "Sample Answer 3", "points": 300 },
        { "question": "Sample Question 4", "answer": "Sample Answer 4", "points": 400 },
        { "question": "Sample Question 5", "answer": "Sample Answer 5", "points": 500 },
        { "question": "Sample Question 6", "answer": "Sample Answer 6", "points": 600 },
        { "question": "Sample Question 7", "answer": "Sample Answer 7", "points": 700 }
    ],
    "Category 2": [
        { "question": "Sample Question 1", "answer": "Sample Answer 1", "points": 100 },
        { "question": "Sample Question 2", "answer": "Sample Answer 2", "points": 200 },
        { "question": "Sample Question 3", "answer": "Sample Answer 3", "points": 300 },
        { "question": "Sample Question 4", "answer": "Sample Answer 4", "points": 400 },
        { "question": "Sample Question 5", "answer": "Sample Answer 5", "points": 500 },
        { "question": "Sample Question 6", "answer": "Sample Answer 6", "points": 600 },
        { "question": "Sample Question 7", "answer": "Sample Answer 7", "points": 700 }
    ],
    "Category 3": [
        { "question": "Sample Question 1", "answer": "Sample Answer 1", "points": 100 },
        { "question": "Sample Question 2", "answer": "Sample Answer 2", "points": 200 },
        { "question": "Sample Question 3", "answer": "Sample Answer 3", "points": 300 },
        { "question": "Sample Question 4", "answer": "Sample Answer 4", "points": 400 },
        { "question": "Sample Question 5", "answer": "Sample Answer 5", "points": 500 },
        { "question": "Sample Question 6", "answer": "Sample Answer 6", "points": 600 },
        { "question": "Sample Question 7", "answer": "Sample Answer 7", "points": 700 }
    ],
    "Category 4": [
        { "question": "Sample Question 1", "answer": "Sample Answer 1", "points": 100 },
        { "question": "Sample Question 2", "answer": "Sample Answer 2", "points": 200 },
        { "question": "Sample Question 3", "answer": "Sample Answer 3", "points": 300 },
        { "question": "Sample Question 4", "answer": "Sample Answer 4", "points": 400 },
        { "question": "Sample Question 5", "answer": "Sample Answer 5", "points": 500 },
        { "question": "Sample Question 6", "answer": "Sample Answer 6", "points": 600 },
        { "question": "Sample Question 7", "answer": "Sample Answer 7", "points": 700 }
    ],
    "Category 5": [
        { "question": "Sample Question 1", "answer": "Sample Answer 1", "points": 100 },
        { "question": "Sample Question 2", "answer": "Sample Answer 2", "points": 200 },
        { "question": "Sample Question 3", "answer": "Sample Answer 3", "points": 300 },
        { "question": "Sample Question 4", "answer": "Sample Answer 4", "points": 400 },
        { "question": "Sample Question 5", "answer": "Sample Answer 5", "points": 500 },
        { "question": "Sample Question 6", "answer": "Sample Answer 6", "points": 600 },
        { "question": "Sample Question 7", "answer": "Sample Answer 7", "points": 700 }
    ],
    "Category 6": [
        { "question": "Sample Question 1", "answer": "Sample Answer 1", "points": 100 },
        { "question": "Sample Question 2", "answer": "Sample Answer 2", "points": 200 },
        { "question": "Sample Question 3", "answer": "Sample Answer 3", "points": 300 },
        { "question": "Sample Question 4", "answer": "Sample Answer 4", "points": 400 },
        { "question": "Sample Question 5", "answer": "Sample Answer 5", "points": 500 },
        { "question": "Sample Question 6", "answer": "Sample Answer 6", "points": 600 },
        { "question": "Sample Question 7", "answer": "Sample Answer 7", "points": 700 }
    ]
}`;
            const tempInput = document.createElement('textarea');
            tempInput.value = template;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);
            alert('JSON template copied to clipboard');
        }

        document.getElementById('startGame').addEventListener('click', startGame);
        document.getElementById('resetGame').addEventListener('click', resetGame);
        document.getElementById('togglePoints').addEventListener('click', togglePoints);
    </script>
</body>
</html>

